(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{408:e=>{e.exports={account:"AccountComponent_account__7W3E2","account-info-read":"AccountComponent_account-info-read__DYn4M","account-info":"AccountComponent_account-info__HrvdJ","edit-form":"AccountComponent_edit-form__ZbjmI",name:"AccountComponent_name__Cy3_t",text:"AccountComponent_text__kw73m","doctor-info":"AccountComponent_doctor-info__0bpLW"}},3801:e=>{e.exports={cover:"Photo_cover__moVYV","photo-icon":"Photo_photo-icon__KBk79",photo:"Photo_photo__tgppR"}},4130:(e,t,s)=>{"use strict";s.d(t,{AccountComponent:()=>h});var a=s(5155),r=s(2115),n=s(5695),o=s(408),c=s.n(o),i=s(3801),l=s.n(i);let u=()=>(0,a.jsxs)("div",{className:l().cover,children:[(0,a.jsxs)("svg",{className:l()["photo-icon"],width:"84",height:"74",viewBox:"0 0 84 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.903 9.093L19.7505 15.75H13.125C9.64403 15.75 6.30564 17.1328 3.84422 19.5942C1.38281 22.0556 0 25.394 0 28.875V60.375C0 63.856 1.38281 67.1944 3.84422 69.6558C6.30564 72.1172 9.64403 73.5 13.125 73.5H70.875C74.356 73.5 77.6944 72.1172 80.1558 69.6558C82.6172 67.1944 84 63.856 84 60.375V28.875C84 25.394 82.6172 22.0556 80.1558 19.5942C77.6944 17.1328 74.356 15.75 70.875 15.75H64.2443L62.097 9.093C61.244 6.45047 59.5748 4.14657 57.3296 2.51265C55.0844 0.878741 52.3788 -0.00098495 49.602 8.27554e-07H34.398C31.6212 -0.00098495 28.9156 0.878741 26.6704 2.51265C24.4252 4.14657 22.756 6.45047 21.903 9.093ZM13.125 21H23.5725L26.8958 10.71C27.4068 9.1237 28.408 7.74044 29.7552 6.75929C31.1024 5.77814 32.7261 5.2497 34.3927 5.25H49.6073C51.273 5.25081 52.8955 5.77977 54.2417 6.76083C55.5878 7.7419 56.5882 9.12455 57.099 10.71L60.4222 21H70.875C72.9636 21 74.9666 21.8297 76.4435 23.3065C77.9203 24.7834 78.75 26.7864 78.75 28.875V60.375C78.75 62.4636 77.9203 64.4666 76.4435 65.9435C74.9666 67.4203 72.9636 68.25 70.875 68.25H13.125C11.0364 68.25 9.03338 67.4203 7.55653 65.9435C6.07969 64.4666 5.25 62.4636 5.25 60.375V28.875C5.25 26.7864 6.07969 24.7834 7.55653 23.3065C9.03338 21.8297 11.0364 21 13.125 21Z",fill:"white"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.25 42C26.25 46.1772 27.9094 50.1832 30.8631 53.1369C33.8168 56.0906 37.8228 57.75 42 57.75C46.1772 57.75 50.1832 56.0906 53.1369 53.1369C56.0906 50.1832 57.75 46.1772 57.75 42C57.75 37.8228 56.0906 33.8168 53.1369 30.8631C50.1832 27.9094 46.1772 26.25 42 26.25C37.8228 26.25 33.8168 27.9094 30.8631 30.8631C27.9094 33.8168 26.25 37.8228 26.25 42ZM52.5 42C52.5 44.7848 51.3938 47.4555 49.4246 49.4246C47.4555 51.3938 44.7848 52.5 42 52.5C39.2152 52.5 36.5445 51.3938 34.5754 49.4246C32.6062 47.4555 31.5 44.7848 31.5 42C31.5 39.2152 32.6062 36.5445 34.5754 34.5754C36.5445 32.6062 39.2152 31.5 42 31.5C44.7848 31.5 47.4555 32.6062 49.4246 34.5754C51.3938 36.5445 52.5 39.2152 52.5 42Z",fill:"white"})]}),(0,a.jsx)("img",{className:l().photo,src:"",alt:""})]});var m=s(4785),d=s(9972);let h=()=>{let{user:e,logout:t,setUser:s}=(0,m.A)(),[o,i]=(0,r.useState)(!1),[l,h]=(0,r.useState)({fullName:(null==e?void 0:e.fullName)||"",phone:(null==e?void 0:e.phone)||"",email:(null==e?void 0:e.email)||""}),[p,C]=(0,r.useState)(!1),[x,j]=(0,r.useState)(""),v=(0,n.useRouter)();if(!e)return(0,a.jsx)("div",{children:"Загрузка..."});let f=e=>h({...l,[e.target.name]:e.target.value}),b=async e=>{e.preventDefault(),C(!0),j("");try{let e=await (0,d.J9)(l);s(e),i(!1)}catch(e){j(e.message||"Ошибка")}finally{C(!1)}};return(0,a.jsxs)("div",{className:c().account,children:[(0,a.jsx)(u,{}),(0,a.jsx)("div",{className:o?c()["account-info"]:c()["account-info-read"],children:o?(0,a.jsxs)("form",{onSubmit:b,className:c()["edit-form"],children:[(0,a.jsxs)("div",{className:c()["info-item"],children:[(0,a.jsx)("h3",{className:c().name,children:"ФИО:"}),(0,a.jsx)("input",{className:c().text,name:"fullName",value:l.fullName,onChange:f,required:!0})]}),(0,a.jsxs)("div",{className:c()["info-item"],children:[(0,a.jsx)("h3",{className:c().name,children:"Номер телефона:"}),(0,a.jsx)("input",{className:c().text,name:"phone",value:l.phone,onChange:f,required:!0})]}),(0,a.jsxs)("div",{className:c()["info-item"],children:[(0,a.jsx)("h3",{className:c().name,children:"Email"}),(0,a.jsx)("input",{className:c().text,name:"email",type:"email",value:l.email,onChange:f,required:!0})]}),x&&(0,a.jsx)("div",{className:c().error,children:x}),(0,a.jsx)("button",{className:c().button,type:"submit",disabled:p,children:"Сохранить"}),(0,a.jsx)("button",{className:c().button,type:"button",onClick:()=>{i(!1),j("")},disabled:p,children:"Отмена"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:c()["info-item"],children:[(0,a.jsx)("h3",{className:c().name,children:"ФИО:"}),(0,a.jsx)("p",{className:c().text,children:e.fullName})]}),(0,a.jsxs)("div",{className:c()["info-item"],children:[(0,a.jsx)("h3",{className:c().name,children:"Номер телефона:"}),(0,a.jsx)("p",{className:c().text,children:e.phone})]}),(0,a.jsxs)("div",{className:c()["info-item"],children:[(0,a.jsx)("h3",{className:c().name,children:"Дата регистрации"}),(0,a.jsx)("p",{className:c().text,children:function(e){return e?new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):""}(e.createdAt)})]}),(0,a.jsxs)("div",{className:c()["info-item"],children:[(0,a.jsx)("h3",{className:c().name,children:"Email"}),(0,a.jsx)("p",{className:c().text,children:e.email})]}),x&&(0,a.jsx)("div",{className:c().error,children:x}),(0,a.jsx)("button",{className:c().button,onClick:()=>{h({fullName:e.fullName||"",phone:e.phone||"",email:e.email||""}),i(!0),j("")},children:"Редактировать"}),(0,a.jsx)("button",{className:c().button,onClick:()=>{t(),v.push("/")},children:"Выйти"})]})})]})}},4785:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,AuthProvider:()=>c});var a=s(5155),r=s(2115),n=s(9972);let o=(0,r.createContext)(),c=e=>{let{children:t}=e,[s,c]=(0,r.useState)(!1),[i,l]=(0,r.useState)(null),u=(0,r.useCallback)(async e=>{let t=await (0,n.iD)(e);return t.error||t.token&&((0,n.M$)(t.token),c(!0),l(t.user||null)),t},[]),m=(0,r.useCallback)(async e=>{let t=await (0,n.kz)(e);return t.error||t.token&&((0,n.M$)(t.token),c(!0),l(t.user||null)),t},[]),d=(0,r.useCallback)(()=>{(0,n.cO)(),c(!1),l(null)},[]),h=(0,r.useCallback)(async()=>{let e=(0,n.QF)();if(!e)return;let t=await (0,n.jp)(e);t&&!t.error?(c(!0),l(t)):d()},[d]);return(0,r.useEffect)(()=>{h()},[h]),(0,a.jsx)(o.Provider,{value:{isAuth:s,user:i,login:u,logout:d,register:m,setUser:l},children:t})},i=()=>(0,r.useContext)(o)},5002:()=>{},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},7426:e=>{e.exports={"doctors-breadcrumbs":"Breadcrumbs_doctors-breadcrumbs__Cei_p","doctors-breadcrumbs-item":"Breadcrumbs_doctors-breadcrumbs-item__PEUKf","doctors-breadcrumbs-separator":"Breadcrumbs_doctors-breadcrumbs-separator__iquRO"}},9543:(e,t,s)=>{Promise.resolve().then(s.bind(s,4130)),Promise.resolve().then(s.bind(s,9998)),Promise.resolve().then(s.t.bind(s,5002,23))},9972:(e,t,s)=>{"use strict";s.d(t,{gG:()=>v,ar:()=>f,mn:()=>b,Ru:()=>h,QF:()=>c,jp:()=>x,iD:()=>C,J9:()=>j,kz:()=>p,cO:()=>i,M$:()=>o});let a="http://localhost:5000/api",r="http://localhost:5000",n={img:{doctors:"".concat(r,"/uploads/doctors/"),services:"".concat(r,"/uploads/services/"),users:"".concat(r,"/uploads/users/")},register:"".concat(a,"/auth/register"),login:"".concat(a,"/auth/login"),me:"".concat(a,"/user/me"),appointments:"".concat(a,"/appointments"),doctors:"".concat(a,"/doctors"),services:"".concat(a,"/services")},o=e=>localStorage.setItem("jwt",e),c=()=>localStorage.getItem("jwt"),i=()=>localStorage.removeItem("jwt"),l=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s={};return t&&(s["Content-Type"]="application/json"),e&&(s.Authorization="Bearer ".concat(e)),s},u=async e=>{let t;try{t=await e.json()}catch(e){return{error:!0,message:"Невозможно прочитать ответ от сервера"}}return e.ok?t:{error:!0,message:(null==t?void 0:t.message)||"Ошибка: ".concat(e.status)}},m=async(e,t)=>{try{let s=await fetch(e,{headers:l(t,!1),credentials:"include"}),a=await u(s);if(a.error)return a;return function e(t){return Array.isArray(t)?t.map(e):t&&"object"==typeof t?Object.fromEntries(Object.entries(t).map(t=>{let[s,a]=t;return["_id"===s?"id":s,e(a)]})):t}(a)}catch(e){return{error:!0,message:"Ошибка получения данных"}}},d=async(e,t,s)=>{try{let a=await fetch(e,{method:"POST",headers:l(s),body:JSON.stringify(t),credentials:"include"});return await u(a)}catch(e){return{error:!0,message:"Ошибка отправки данных"}}},h=e=>"".concat(n.img.doctors).concat(e),p=e=>d(n.register,e),C=e=>d(n.login,e),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c();return m(n.me,e)},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c();return patchAuthorizenData(n.me,e,t)},v=e=>d(n.appointments,e),f=()=>m(n.doctors),b=()=>m(n.services)},9998:(e,t,s)=>{"use strict";s.d(t,{Breadcrumbs:()=>u});var a=s(5155),r=s(5695),n=s(2115),o=s(7426),c=s.n(o),i=s(6874),l=s.n(i);let u=e=>{let{doctor:t,service:s}=e,o=(0,r.usePathname)(),i={doctors:"Врачи",microscopist:"Микроскописты",orthodontist:"Ортодонты",hygienist:"Гигиенисты",therapist:"Терапевты",surgeon:"Хирурги",services:"Услуги",contacts:"Контакты",about:"О клинике",vacancies:"Вакансии","legal-information":"Юридическая информация",terapy:"Терапия",surgery:"Хирургия",esthetic:"Эстетика",prosthetics:"Протезирование"},u=o.split("/").filter(Boolean),m=(0,n.useMemo)(()=>u.map((e,a)=>{let r="/"+u.slice(0,a+1).join("/"),n=i[e];return!n&&t&&e===t.slug&&(n=t.name),!n&&s&&e===s.slug&&(n=s.text),n||(n=decodeURIComponent(e).replace(/-/g," ")),{name:n,href:r,isLast:a===u.length-1}}),[o,t,s]);return(0,a.jsx)("nav",{"aria-label":"breadcrumb",children:(0,a.jsxs)("ul",{className:c()["doctors-breadcrumbs"],children:[(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/",className:c()["doctors-breadcrumbs-item"],children:"Главная"})}),m.map((e,t)=>{let{name:s,href:r,isLast:n}=e;return(0,a.jsxs)("li",{className:c()["doctors-breadcrumbs-item"],children:[(0,a.jsx)("div",{className:c()["doctors-breadcrumbs-separator"]}),n?(0,a.jsx)("span",{children:s}):(0,a.jsx)(l(),{href:r,children:s})]},r)})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[87,874,441,684,358],()=>t(9543)),_N_E=e.O()}]);